language: python

services:
  - docker

matrix:
  include:
    - os: linux
      dist: trusty
      sudo: required
      python: 2.7
      env:
        - DOCKER_OS=ubuntu16.04
    - os: linux
      dist: trusty
      sudo: required
      python: 3.5
      env:
        - DOCKER_OS=ubuntu16.04
    - os: linux
      dist: trusty
      sudo: required
      python: 2.7
      env:
        - DOCKER_OS=centos7
    - os: linux
      dist: trusty
      sudo: required
      python: 3.5
      env:
        - DOCKER_OS=centos7
    - os: osx
      language: generic
      osx_image: xcode7.2
      env:
        - PYTHON_VERSION=2.7
    - os: osx
      language: generic
      osx_image: xcode7.2
      env:
        - PYTHON_VERSION=3.5

install:
  # - if [ "$TRAVIS_OS_NAME" == "linux" ]; then docker build -f Dockerfile-$DOCKER_OS-py${TRAVIS_PYTHON_VERSION} -t fredrikaverpil/pyside2-$DOCKER_OS-py${TRAVIS_PYTHON_VERSION} . ; fi
  # - if [ "$TRAVIS_OS_NAME" == "linux" ]; then docker run --rm -v $(pwd):/pyside-setup/dist fredrikaverpil/pyside2-$DOCKER_OS-py${TRAVIS_PYTHON_VERSION} ; fi
  - if [ "$TRAVIS_OS_NAME" == "osx" ] && [ "$PYTHON_VERSION" == "2.7" ]; then chmod +x build_osx_py2.7.sh ; fi
  - if [ "$TRAVIS_OS_NAME" == "osx" ] && [ "$PYTHON_VERSION" == "2.7" ]; then ./build_osx_py2.7.sh ; fi

script:
  - if [ "$TRAVIS_OS_NAME" == "linux" ]; then ls -al *.whl ; fi
  - if [ "$TRAVIS_OS_NAME" == "osx" ]; then ls -al ~/pyside-setup/dist/*.whl ; fi

language: python

services:
  - docker

matrix:
  include:
  #   - os: linux
  #     dist: trusty
  #     sudo: required
  #     python: 2.7
  #     env:
  #       - DOCKER_OS=ubuntu16.04
  #   - os: linux
  #     dist: trusty
  #     sudo: required
  #     python: 3.5
  #     env:
  #       - DOCKER_OS=ubuntu16.04
  #   - os: linux
  #     dist: trusty
  #     sudo: required
  #     python: 2.7
  #     env:
  #       - DOCKER_OS=centos7
  #   - os: linux
  #     dist: trusty
  #     sudo: required
  #     python: 3.5
  #     env:
  #       - DOCKER_OS=centos7
    - os: osx
      language: generic
      osx_image: xcode7.2
      python: 2.7
    - os: osx
      language: generic
      osx_image: xcode7.2
      python: 3.5


before_install:
  - if [ "$TRAVIS_OS_NAME" == "linux" ]; then docker build -f Dockerfile-$DOCKER_OS-py${TRAVIS_PYTHON_VERSION} -t fredrikaverpil/pyside2-$DOCKER_OS-py${TRAVIS_PYTHON_VERSION} . ; fi
  - if [ "$TRAVIS_OS_NAME" == "linux" ]; then docker run --rm -v $(pwd):/pyside-setup/dist fredrikaverpil/pyside2-$DOCKER_OS-py${TRAVIS_PYTHON_VERSION} ; fi
  - if [ "$TRAVIS_OS_NAME" == "osx" ]; then chmod +x build_osx_py${TRAVIS_PYTHON_VERSION}.sh ; fi
  - if [ "$TRAVIS_OS_NAME" == "osx" ]; then ./build_osx_py${TRAVIS_PYTHON_VERSION}.sh ; fi
  - if [ "$TRAVIS_OS_NAME" == "osx" ]; then mv ~/pyside-setup/dist/PySide2*.whl . ; fi

# This could test portability of wheel
# install:
#   - pip install PySide2*.whl

script:
  - ls -al PySide2*.whl
